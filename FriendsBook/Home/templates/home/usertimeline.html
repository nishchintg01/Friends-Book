{% load static %}
{% load humanize %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <!--  This file has been downloaded from https://bootdey.com  -->
    <!--  All snippets are MIT license https://bootdey.com/license -->
    <title>Friends Book | Home</title>
   <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <link href="http://netdna.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="{% static 'css/profile.css' %}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="{% static 'css/navstyle.css' %}">    
    <style type="text/css">
    .media-left, .media-body{
        margin-left: 12px;
        margin-top: 9px;
    }
    .media-object{
        border-radius: 25px;
    }
.title {
    margin-left: 16px;
    font-size: 16px;
    font-weight:bold;
}
.komen {
    margin-top: -8px;
    margin-left: 16px;
    font-size:14px;
}
.timeline-comment-box .user {
    float: left;
    width: 34px;
    height: 34px;
    overflow: hidden;
    border-radius: 30px
}

.timeline-comment-box .user img {
    max-width: 100%;
    max-height: 100%
}

.timeline-comment-box .user+.input {
    margin-left: 48px
}
 .new{
    font-size: 12px;
 }   
 .card {
    -moz-transition: all 0.5s;
    -o-transition: all 0.5s;
    -webkit-transition: all 0.5s;
    transition: all 0.5s;
    background: #fff;
    border-radius: .1875rem;
    margin-bottom: 30px;
    border: 0;
    display: inline-block;
    position: relative;
    width: 100%;
    box-shadow: none;
}
.card .header {
    color: #424242;
    padding: 20px;
    position: relative;
    box-shadow: none;
}
.card .header h2 {
    color: #757575;
    position: relative;
}
.card .header h2:before {
    background: #6572b8;
}
.card .header h2 {
    font-size: 15px;
}
.card .header h2::before {
    position: absolute;
    width: 2px;
    height: 18px;
    left: -20px;
    top: 0;
    content: '';
}
.theme-purple .card .header h2 strong {
    color: #6572b8;
}
.card .header h2 small {
    color: #9e9e9e;
    line-height: 15px;
}
.card .body {
    color: #424242;
    font-weight: 400;
    padding: 20px;
}
.new_friend_list {
    margin-bottom: 0px;
}

.new_friend_list li .users_name {
    color: #424242;
    text-transform: capitalize;
}
.new_friend_list li .users_name {
    margin-top: 5px;
}
.new_friend_list li .users_name{
 margin-bottom: 0px;
}
.new_friend_list li .join_date {
    color: #757575;
}

a {
    outline: none !important;
    color: #007bff;
    text-decoration: none;
    background-color: transparent;
}
.people-nearby .google-maps{
  background: #f8f8f8;
  border-radius: 4px;
  border: 1px solid #f1f2f2;
  padding: 20px;
  margin-bottom: 20px;
}

.people-nearby .google-maps .map{
  height: 300px;
  width: 100%;
  border: none;
}

.people-nearby .nearby-user{
  padding: 20px 0;
  border-top: 1px solid #f1f2f2;
  border-bottom: 1px solid #f1f2f2;
  margin-bottom: 20px;
}

img.profile-photo-lg{
  height: 80px;
  width: 80px;
  border-radius: 50%;
}


</style>
</head>
<body>           
<!--Navbar -->
{% include 'Navigationbar.html' %}
<!--Navbar Ends-->     

<!--Main Body -->
<div class="container mt-4">
<div class="row">
    <div class="col-sm-12">
        <div>
            <div class="content social-timeline">
                <div class="">

                    <div class="row">
                        <div class="col-md-12">
                            <div class="social-wallpaper">
                                <img class="img-fluid" src="{{request.user.profile.cover_pic.url}}" style="width: 100%;height: 100%;">
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-xl-3 col-lg-4 col-md-4 col-xs-12">
                            <div class="social-timeline-left">
                                <div class="card">
                                    <div class="social-profile">
                                        <img class="img-fluid width-100" src="{{request.user.profile.Profile_pic.url}}" alt="">
                                        <div class="profile-hvr m-t-15">
                                            <i class="icofont icofont-ui-edit p-r-10"></i>
                                            <i class="icofont icofont-ui-delete"></i>
                                        </div>
                                    </div>
                                    <div class="card-block social-follower">
                                        <h4>{{request.user.profile.Full_name}}</h4>
                                        <h5>{{request.user.username}}</h5>
                                        <div class="row follower-counter">
                                            <div class="col-5">
                                                <button class="btn btn-primary btn-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="485">
                                                    <i class="fa fa-user"> {{friends.count}} Friends</i>
                                                </button> 
                                            </div>
                                            <div class="col-5">
                                                <button class="btn btn-success btn-icon" data-toggle="tooltip" data-placement="top" title="" data-original-title="90">
                                                    <i class="fa fa-eye"> {{posts.count}} Posts</i>
                                                </button>
                                            </div>
                                        </div>
                                       
                                    </div>
                                </div>

                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="card-header-text">Friends Requests</h5>
                                    </div>
                                    {% for  friend in rec_friend_requests%}
                                    <div class="col-md-12">
                                        <div class="people-nearby">
                                          <div class="nearby-user">
                                            <div class="row">
                                              <div class="col-md-12 col-sm-12">
                                                <img src="{{friend.from_user.profile.Profile_pic.url}}" alt="user" class="profile-photo-lg">
                                              </div>
                                              <div class="col-md-12 col-sm-12">
                                                <h5><a href="#" class="profile-link">{{friend.from_user.profile.username}}</a></h5>
                                                <p>Software Engineer</p>
                                                <p class="text-muted">500m away</p>
                                              </div>
                                              <div class="col-md-12 col-sm-12">
                                                <a href="{% url 'accept_request' friend.from_user.id %}" class="btn btn-primary pull-right">Accept request</a>
                                                <a href="{% url 'delete_request' friend.from_user.id %}" class="btn btn-primary pull-right">Cancel</a>

                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>

                        </div>
                        <div class="col-xl-9 col-lg-8 col-md-8 col-xs-12 ">

                            <div class="card social-tabs">
                                <ul class="nav nav-tabs md-tabs tab-timeline" role="tablist">
                                    <li class="nav-item">
                                        <a class="nav-link active" data-toggle="tab" href="#timeline" role="tab">Timeline</a>
                                        <div class="slide"></div>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" data-toggle="tab" href="#about" role="tab">About</a>
                                        <div class="slide"></div>
                                    </li>
                              
                                    <li class="nav-item">
                                        <a class="nav-link" data-toggle="tab" href="#friends" role="tab">Friends</a>
                                        <div class="slide"></div>
                                    </li>
                                </ul>
                            </div>

                            <div class="tab-content">

                                <div class="tab-pane active" id="timeline">
                                    <div class="row">
                                        <div class="col-md-12 timeline-dot">
                                            <div class="social-timelines p-relative">
                                                <div class="row timeline-right p-t-35">
                                                    <div class="col-2 col-sm-2 col-xl-1">
                                                    </div>
                                                    <div class="col-10 col-sm-10 col-xl-11 p-l-5 p-b-35">
                                                              <!--- \\\\\\\Post-->
          {% for article in posts %}                                 
                <div class="card social-timeline-card">            
                    <div class="card-header">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="mr-2">
                                    <a href="{% url 'timeline' %}" style="text-decoration-line: none;"><img class="rounded-circle" width="45" src="{{article.Author.profile.Profile_pic.url}}" alt="User profile"></a>
                                </div>
                                <div class="ml-2">
                                    <a href="{% url 'timeline' %}" style="text-decoration-line: none;"><div class="h5 m-0 text-blue">{{article.Author.profile.username}}</div></a>
                                    <div class="h7 text-muted">{{article.Author.profile.Full_name}} </div>            
                                </div>
                            </div>
                            <div>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        
                            <h5 class="card-title">{{article.Status}}</h5>
                                            </div>
                    <div class="card-footer">
                        <a href="{% url 'like' id=article.id %}" class="card-link"><i class="fas fa-heart"></i> {{article.Likes.count}}</a>
                        <a href="#" class="card-link" data-toggle="popover" title="Popover Header" data-content="Some content inside the popover"><i class="fas fa-share"></i> Share</a>
                    </div>
                    <div class="card-footer">
                    <div class="timeline-comment-box">
                 <div class="user">
                    <img src="https://bootdey.com/img/Content/avatar/avatar3.png"></div>
                    <div class="input">
                        <form action="{% url 'writecomment' article.slug %}" method="post">
                            {% csrf_token %}
                               <div class="input-group">
                                      {{form.comment}}
                                      <span class="input-group-btn">
                                      <button class="btn btn-primary rounded-corner" type="submit">Comment</button>
                                      </span>
                                       </div>
                                    </form>
                                 </div>
                              </div>
                            </div>
                            {% if article.comments.all %}
                            <div class="overflow-auto" style="height: 70px;">
                        
                            {% for comment in article.comments.all %}
                             <div class="media">
                                {% if request.user.username == comment.Author.profile.username %}
                                    <div class="media-left">
                                      <a href="{% url 'timeline' %}"><img src="{{comment.Author.profile.Profile_pic.url}}" class="media-object" style="width:40px"></a>
                                    </div>
                                {% else %}
                                    <div class="media-left">
                                      <a href="{% url 'getuserprofile' comment.Author.profile.username %}"><img src="{{comment.Author.profile.Profile_pic.url}}" class="media-object" style="width:40px"></a>
                                    </div>
                                {% endif %}
                                    <div class="media-body">
                                    {% if request.user.username == comment.Author.profile.username %}
                                      <h4 class="media-heading title"><a href="{% url 'timeline' %}">{{comment.Author}} </a><span class="text-muted new" >{{comment.Time_stamp|naturaltime}}</span></h4>
                                    {% else %}
                                     <h4 class="media-heading title"><a href="{% url 'getuserprofile' comment.Author.profile.username %}">{{comment.Author}} </a><span class="text-muted new" >{{comment.Time_stamp|naturaltime}}</span></h4>
                                    {% endif %}
                                      <p class="komen">
                                          {{comment.comment}}
                                      </p>
                                    </div>
                                </div>
                                {% endfor %}
                        
                </div>{% endif %}</div>

    {% endfor %}
                <!-- Post /////--> 
                                                    </div>
                                                </div>
                                            </div>
                                    
                                        </div>
                                    </div>
                            
                                </div>

                                <div class="tab-pane" id="about">
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <div class="card">
                                                <div class="card-header">
                                                    <h5 class="card-header-text">Basic Information</h5>
                                                    <button id="edit-btn" type="button" class="btn btn-primary waves-effect waves-light f-right">
                                                        <i class="icofont icofont-edit"></i>
                                                    </button>
                                                </div>
                                                <div class="card-block">
                                                    <div id="view-info" class="row">
                                                        <div class="col-lg-6 col-md-12">
                                                            <form>
                                                                <table class="table table-responsive m-b-0">
                                                                    <tbody>
                                                                        <tr>
                                                                            <th class="social-label b-none p-t-0">Full Name
                                                                            </th>
                                                                            <td class="social-user-name b-none p-t-0 text-muted">{{request.user.profile.Full_name}}</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <th class="social-label b-none">Gender</th>
                                                                            <td class="social-user-name b-none text-muted">{{request.user.profile.Gender}}</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <th class="social-label b-none">Birth Date</th>
                                                                            <td class="social-user-name b-none text-muted">{{request.user.profile.Birth_day}}</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <th class="social-label b-none">Martail Status</th>
                                                                            <td class="social-user-name b-none text-muted">{{request.user.profile.Relation_status}}</td>
                                                                        </tr>
                                                                  
                                                                    </tbody>
                                                                </table>
                                                            </form>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-12">
                                            <div class="card">
                                                <div class="card-header">
                                                    <h5 class="card-header-text">Contact Information</h5>
                                                    <button id="edit-Contact" type="button" class="btn btn-primary waves-effect waves-light f-right">
                                                        <i class="icofont icofont-edit"></i>
                                                    </button>
                                                </div>
                                                <div class="card-block">
                                                    <div id="contact-info" class="row">
                                                        <div class="col-lg-6 col-md-12">
                                                            <table class="table table-responsive m-b-0">
                                                                <tbody>
                                                                    <tr>
                                                                        <th class="social-label b-none p-t-0">Mobile Number</th>
                                                                        <td class="social-user-name b-none p-t-0 text-muted">{{request.user.profile.Phone}}</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <th class="social-label b-none">Email Address</th>
                                                                        <td class="social-user-name b-none text-muted">{{request.user.profile.Email}}</td>
                                                                    </tr>
                                                                
                                                                    <tr>
                                                                        <th class="social-label b-none p-b-0">Website</th>
                                                                        <td class="social-user-name b-none p-b-0 text-muted">{{request.user.profile.website}}</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-12">
                                            <div class="card">
                                                <div class="card-header">
                                                    <h5 class="card-header-text">Work</h5>
                                                    <button id="edit-work" type="button" class="btn btn-primary waves-effect waves-light f-right">
                                                        <i class="icofont icofont-edit"></i>
                                                    </button>
                                                </div>
                                                <div class="card-block">
                                                    <div id="work-info" class="row">
                                                        <div class="col-lg-6 col-md-12">
                                                            <table class="table table-responsive m-b-0">
                                                                <tbody>
                                                                    <tr>
                                                                        <th class="social-label b-none p-t-0">Occupation &nbsp; &nbsp; &nbsp;
                                                                        </th>
                                                                        <td class="social-user-name b-none p-t-0 text-muted">{{request.user.profile.Profession}}</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    <div id="edit-contact-work" class="row" style="display: none;">
                                                        <div class="col-lg-12 col-md-12">
                                                            <form>
                                                                <div class="input-group">
                                                                    <select id="occupation" class="form-control">
                                                                        <option value=""> Select occupation </option>
                                                                        <option value="married">Developer</option>
                                                                        <option value="unmarried">Web Design</option>
                                                                    </select>
                                                                </div>
                                                                <div class="input-group">
                                                                    <select id="skill" class="form-control">
                                                                        <option value=""> Select Skills </option>
                                                                        <option value="married">C# &amp; .net</option>
                                                                        <option value="unmarried">Angular</option>
                                                                    </select>
                                                                </div>
                                                                <div class="input-group">
                                                                    <select id="job" class="form-control">
                                                                        <option value=""> Select Job </option>
                                                                        <option value="married">#</option>
                                                                        <option value="unmarried">Other</option>
                                                                    </select>
                                                                </div>
                                                                <div class="text-center m-t-20">
                                                                    <a href="javascript:;" id="work-save" class="btn btn-primary waves-effect waves-light m-r-20">Save</a>
                                                                    <a href="javascript:;" id="work-cancel" class="btn btn-default waves-effect waves-light">Cancel</a>
                                                                </div>
                                                            </form>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane" id="friends">
                                    <div class="row">
                                      <!--Friends Section-->
                                        <div class="col-md-12 col-lg-12">
            <div class="card">
                <div class="header">
                    <h2><strong>All</strong> Friends <small></small></h2>
                </div>
                <div class="body">
                    <ul class="new_friend_list list-unstyled row">
                        {% for friend in friends %}
                        <li class="col-lg-4 col-md-2 col-sm-6 col-4">
                            <a href="">
                                <img src="{{friend.Profile_pic.url}}" alt="User Image" class="img-fluid h-25">
                                <h6 class="users_name">{{friend.Full_name}}</h6>
                                <small class="join_date">{{friend.username}}</small>
                            </a>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
                                      <!--Friends Section-->
                            
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
<!--Main Body Ends-->

<script src="http://netdna.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script type="text/javascript">
     $(document).ready(function() {
            $("li.nav-item").click(function (e) {
                e.preventDefault();
                $(".nav-item").removeClass("active");
                $(this).addClass("active");   
            });
        });
$(document).ready(function(){
  $('[data-toggle="popover"]').popover();
});
</script>
</body>
</html>